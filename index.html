<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã¾ã”ã¯ã‚ã‚„ã•ã—4</title>
    <link rel="apple-touch-icon" href="magowayasa4.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .check-box {
            transition: all 0.2s ease-in-out;
            border: 2px solid #e5e7eb; /* gray-200 */
        }
        .check-box.checked {
            background-color: #fffbeb; /* amber-50 */
            border-color: #fcd34d; /* amber-300 */
        }
    </style>
</head>
<body class="bg-white flex items-center justify-center min-h-screen">
    <div class="w-full max-w-md mx-auto bg-amber-50 rounded-2xl shadow-lg p-6 md:p-8">
        
        <!-- é€±ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="flex items-center justify-between mb-6">
            <button id="prev-week" class="transition-colors p-2">
                <i class="fas fa-chevron-left fa-fw text-2xl text-gray-500 hover:text-gray-800"></i>
            </button>
            <h2 id="week-display" class="text-xl font-semibold text-gray-700 tracking-wider"></h2>
            <button id="next-week" class="transition-colors p-2">
                <i class="fas fa-chevron-right fa-fw text-2xl text-gray-500 hover:text-gray-800"></i>
            </button>
        </div>

        <!-- ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ -->
        <div id="checklist" class="space-y-4">
            <!-- JavaScriptã§é …ç›®ãŒã“ã“ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
        </div>

        <!-- ã‚ã‚„ã™ -->
        <div class="mt-8 pt-6 border-t border-amber-200 text-gray-600">
            <h3 class="text-lg font-bold text-center mb-4 text-gray-700">1é€±é–“ã‚ãŸã‚Šã®ã‚ã‚„ã™é‡ï¼ˆæˆäººï¼‰</h3>
            <div class="space-y-4 text-sm">
                <div>
                    <h4 class="font-bold">â‘  è±†é¡ï¼ˆå¤§è±†è£½å“ãƒ»è±†ï¼‰</h4>
                    <p class="pl-4">ä¾‹ï¼šè±†è…1/3ä¸ã€ç´è±†1ãƒ‘ãƒƒã‚¯ã€ç…®è±†å°é‰¢ãªã©</p>
                    <p class="pl-4">é€±ã« 350ã€œ700g ç¨‹åº¦</p>
                </div>
                <div>
                    <h4 class="font-bold">â‘¡ ã”ã¾ãƒŠãƒƒãƒ„ï¼ˆç¨®å®Ÿé¡ï¼‰</h4>
                    <p class="pl-4">ä¾‹ï¼šã”ã¾å¤§ã•ã˜1ã€œ2ã€ã‚¢ãƒ¼ãƒ¢ãƒ³ãƒ‰5ã€œ10ç²’</p>
                    <p class="pl-4">é€±ã« 70ã€œ140g ç¨‹åº¦</p>
                </div>
                <div>
                    <h4 class="font-bold">â‘¢ æµ·è—»</h4>
                    <p class="pl-4">ä¾‹ï¼šã‚ã‹ã‚ã®å‘³å™Œæ±ã€ã²ã˜ãç…®ã€å°é‰¢1å“ç¨‹åº¦</p>
                    <p class="pl-4">é€±ã« 35ã€œ70gï¼ˆä¹¾ç‰©ï¼‰</p>
                </div>
                <div>
                    <h4 class="font-bold">â‘£ é‡èœ</h4>
                    <p class="pl-4">ä¾‹ï¼šç”Ÿé‡èœã‚µãƒ©ãƒ€1çš¿ï¼‹ç…®ç‰©ã‚„ãŠæµ¸ã—2çš¿ãã‚‰ã„</p>
                    <p class="pl-4">é€±ã« 2,450gï¼ˆ2.5kgç¨‹åº¦ï¼‰</p>
                </div>
                <div>
                    <h4 class="font-bold">â‘¤ é­šé¡</h4>
                    <p class="pl-4">ä¾‹ï¼šåˆ‡ã‚Šèº«1åˆ‡ã‚Œï¼ˆ80gï¼‰ã€åˆºèº«å°é‰¢</p>
                    <p class="pl-4">é€±ã« 420ã€œ700g ç¨‹åº¦</p>
                </div>
                <div>
                    <h4 class="font-bold">â‘¥ ãã®ã“é¡</h4>
                    <p class="pl-4">ä¾‹ï¼šã—ã„ãŸã‘2æšã€ã—ã‚ã˜1/2ãƒ‘ãƒƒã‚¯</p>
                    <p class="pl-4">é€±ã« 350ã€œ500g ç¨‹åº¦</p>
                </div>
            </div>
        </div>
        
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const weekDisplay = document.getElementById('week-display');
            const checklistContainer = document.getElementById('checklist');
            const prevWeekBtn = document.getElementById('prev-week');
            const nextWeekBtn = document.getElementById('next-week');

            let currentDate = new Date();
            let appData = {};

            const foodCategories = [
                { id: 'mame', name: 'ã¾ã‚', emoji: 'ğŸ«˜' },
                { id: 'goma', name: 'ã”ã¾ãƒŠãƒƒãƒ„', emoji: 'ğŸ¥œ' },
                { id: 'kaiso', name: 'ã‹ã„ãã†', emoji: 'ğŸŒ¿' },
                { id: 'yasai', name: 'ã‚„ã•ã„', emoji: 'ğŸ¥¬' },
                { id: 'sakana', name: 'ã•ã‹ãª', emoji: 'ğŸŸ' },
                { id: 'kinoko', name: 'ãã®ã“', emoji: 'ğŸ„' },
            ];

            // ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿
            function loadData() {
                // åˆ¥ã®ã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
                const savedData = localStorage.getItem('mealCheckDataV5_Checkbox');
                appData = savedData ? JSON.parse(savedData) : {};
            }

            // ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜
            function saveData() {
                localStorage.setItem('mealCheckDataV5_Checkbox', JSON.stringify(appData));
            }

            function getWeekKey(date) {
                const d = new Date(date);
                d.setHours(0, 0, 0, 0);
                d.setDate(d.getDate() + 4 - (d.getDay() || 7));
                const yearStart = new Date(d.getFullYear(), 0, 1);
                const weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
                return `${d.getFullYear()}-${weekNo}`;
            }
            
            function getWeekDateRange(date) {
                const d = new Date(date);
                const day = d.getDay();
                const diffStart = d.getDate() - day + (day === 0 ? -6 : 1); // é€±ã®å§‹ã¾ã‚Šã‚’æœˆæ›œæ—¥ã«è¨­å®š
                const startDate = new Date(d.setDate(diffStart));
                const endDate = new Date(new Date(startDate).setDate(startDate.getDate() + 6));
                return { startDate, endDate };
            }

            function render() {
                const { startDate, endDate } = getWeekDateRange(currentDate);
                const format = (dt) => `${dt.getMonth() + 1}/${dt.getDate()}`;
                weekDisplay.textContent = `${format(startDate)} ~ ${format(endDate)}`;

                const weekKey = getWeekKey(currentDate);
                if (!appData[weekKey]) {
                    appData[weekKey] = {};
                    foodCategories.forEach(cat => {
                        appData[weekKey][cat.id] = [false, false, false, false]; // 4ã¤ã®ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹
                    });
                }
                const weekData = appData[weekKey];

                checklistContainer.innerHTML = '';
                foodCategories.forEach(category => {
                    const row = document.createElement('div');
                    row.className = 'flex justify-between items-center';

                    const label = document.createElement('div');
                    label.className = 'w-2/5 text-lg font-semibold text-gray-700 whitespace-nowrap pr-2';
                    label.textContent = `${category.emoji} ${category.name}`;
                    row.appendChild(label);
                    
                    const checkboxesWrapper = document.createElement('div');
                    checkboxesWrapper.className = 'w-3/5 flex justify-around items-center gap-1';
                    
                    for (let i = 0; i < 4; i++) {
                        const checkBox = document.createElement('div');
                        checkBox.className = 'check-box w-12 h-12 flex items-center justify-center text-3xl bg-white rounded-lg shadow-sm cursor-pointer transform hover:scale-110';
                        checkBox.dataset.category = category.id;
                        checkBox.dataset.index = i;
                        
                        const isChecked = weekData[category.id] && weekData[category.id][i];
                        
                        if (isChecked) {
                            checkBox.classList.add('checked');
                            checkBox.innerHTML = category.emoji;
                        }
                        checkboxesWrapper.appendChild(checkBox);
                    }
                    row.appendChild(checkboxesWrapper);
                    checklistContainer.appendChild(row);
                });
            }

            prevWeekBtn.addEventListener('click', () => {
                currentDate.setDate(currentDate.getDate() - 7);
                render();
            });

            nextWeekBtn.addEventListener('click', () => {
                currentDate.setDate(currentDate.getDate() + 7);
                render();
            });

            checklistContainer.addEventListener('click', (e) => {
                const checkBox = e.target.closest('.check-box');
                if (checkBox) {
                    const category = checkBox.dataset.category;
                    const index = parseInt(checkBox.dataset.index, 10);
                    const weekKey = getWeekKey(currentDate);
                    
                    appData[weekKey][category][index] = !appData[weekKey][category][index];
                    const isChecked = appData[weekKey][category][index];

                    checkBox.classList.toggle('checked', isChecked);
                    if(isChecked) {
                        checkBox.innerHTML = foodCategories.find(c => c.id === category).emoji;
                    } else {
                        checkBox.innerHTML = '';
                    }
                    
                    saveData();
                }
            });

            loadData();
            render();
        });
    </script>
</body>
</html>




